# ===============================
# SERVER
# ===============================
server.port=8080

# ===============================
# DATABASE (PostgreSQL) â€” dev defaults, override via env
# ===============================
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/mydb}
spring.datasource.username=${DB_USERNAME:myuser}
spring.datasource.password=${DB_PASSWORD:mypassword}
spring.datasource.driver-class-name=org.postgresql.Driver


# Hikari (dev)
spring.datasource.hikari.maximum-pool-size=10

# ===============================
# JPA / Hibernate (dev)
# ===============================
# spring.jpa.hibernate.ddl-auto options: none | validate | update | create | create-drop
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ===============================
# Flyway (off in dev)
# ===============================
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-on-migrate=true

# ===============================
# CORS (dev)
# ===============================
app.cors.allowed-origins=${ALLOWED_ORIGINS:http://localhost:3000}

# ===============================
# SECURITY / JWT
# ===============================
jwt.secret=${JWT_SECRET:ChangeThisInProd}
jwt.access.ttl-ms=${JWT_ACCESS_TTL_MS:2700000}         
jwt.refresh.ttl-ms=${JWT_REFRESH_TTL_MS:604800000}     
jwt.refresh.inactivity-ms=${JWT_REFRESH_INACT_MS:1800000} 

# Back-compat if some code still reads jwt.expiration
jwt.expiration=${jwt.access.ttl-ms}

# Refresh token cookie defaults (set HttpOnly/Secure in code)
app.cookies.refresh.name=refresh_token
app.cookies.refresh.path=/
app.cookies.refresh.same-site=Strict

# ===============================
# EMAIL (dev)
# ===============================
spring.mail.host=${SMTP_HOST:smtp.gmail.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:your_email@gmail.com}
spring.mail.password=${SMTP_PASSWORD:your_email_password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Email verification base (dev)
app.urls.email-verify-base=${EMAIL_VERIFY_BASE:http://localhost:8080/api/auth/confirm-email}

# ===============================
# ACTUATOR (dev)
# ===============================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# ===============================
# LOGGING (verbose in dev)
# ===============================
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
