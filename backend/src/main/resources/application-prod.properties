# Activate this profile via env or JVM arg:
#   SPRING_PROFILES_ACTIVE=prod
#   --spring.profiles.active=prod

# ===============================
# SERVER / PROXY
# ===============================
server.forward-headers-strategy=native
server.compression.enabled=true
server.compression.mime-types=application/json,application/javascript,text/html,text/xml,text/plain,text/css,image/svg+xml

# ===============================
# DATABASE POOL (prod tuning)
# ===============================
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000

# ===============================
# JPA / Hibernate (prod safety)
# ===============================
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false

# ===============================
# Flyway (on in prod)
# ===============================
spring.flyway.enabled=true
spring.flyway.validate-on-migrate=true
spring.flyway.baseline-on-migrate=true   
# if schema may pre-exist

# ===============================
# CORS (prod origins)
# ===============================
app.cors.allowed-origins=${ALLOWED_ORIGINS:https://compilingjava.com}

# ===============================
# EMAIL VERIFY LINK (prod API host)
# ===============================
app.urls.email-verify-base=${EMAIL_VERIFY_BASE:https://api.compilingjava.com/api/auth/confirm-email}

# ===============================
# LOGGING (quieter in prod)
# ===============================
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=OFF
